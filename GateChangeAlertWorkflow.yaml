---
name: "GateChangeAlertWorkflow"
dataIns:
- name: "newGate"
  type: "string"
  source: "newGate"
workflowBody:
- parallel:
    name: "Parallel"
    parallelBody:
    - section:
      - function:
          name: "getPassengers"
          type: "Collection"
          dataIns:
          - name: "newGate"
            type: "string"
            source: "Parallel/newGate"
          dataOuts:
          - name: "passengers"
            type: "collection"
          properties:
          - name: "resources"
            value: "java:arn:aws:lambda:us-east-1:581396451702:function:getPassengers"
      - function:
          name: "getNewGate"
          type: "int"
          dataIns:
          - name: "newGate"
            type: "string"
            source: "Parallel/newGate"
          dataOuts:
          - name: "newGate"
            type: "string"
          properties:
          - name: "resources"
            value: "java:arn:aws:lambda:us-east-1:581396451702:function:getNewGate"
    dataOuts:
    - name: "newGate"
      type: "string"
      source: "newGate"
      passing: true
- function:
    name: "calcCheckDelay"
    type: "int"
    dataOuts:
    - name: "securityCheckDelay"
      type: "number"
    - name: "newGate"
      type: "string"
      passing: true
    - name: "passengers"
      type: "collection"
      passing: true
    properties:
    - name: "resources"
      value: "java:arn:aws:lambda:us-east-1:581396451702:function:calcCheckDelay"
- function:
    name: "calcTimeCheckToGate"
    type: "int"
    dataIns:
    - name: "newGate"
      type: "string"
      source: "newGate"
    - name: "securityCheckDelay"
      type: "number"
      source: "LambdaCalcCheckDelay/securityCheckDelay"
    dataOuts:
    - name: "delay"
      type: "number"
    - name: "passengers"
      type: "collection"
      passing: true
    properties:
    - name: "resources"
      value: "java:arn:aws:lambda:us-east-1:581396451702:function:calcTimeCheckToGate"
- parallelFor:
    name: "ParallelFor"
    dataIns:
    - name: "passenger"
      type: "collection"
      source: "Parallel/passengers"
      constraints:
      - name: "distribution"
        value: "BLOCK(1)"
    - name: "delay"
      type: "number"
      source: "LambdaCalcTimeCheckToGate/delay"
      constraints:
      - name: "distribution"
        value: "REPLICATE(*)"
    loopCounter: {}
    loopBody:
    - function:
        name: "getGPS"
        type: "int"
        dataIns:
        - name: "passengers"
          type: "collection"
          source: "Parallel/passengers"
        dataOuts:
        - name: "gpsLocation"
          type: "collection"
        - name: "delay"
          type: "number"
          passing: true
        properties:
        - name: "resources"
          value: "java:arn:aws:lambda:us-east-1:581396451702:function:getGPS"
    - function:
        name: "calcTimeToGate"
        type: "int"
        dataIns:
        - name: "gpsLocation"
          type: "collection"
          source: "LambdaGetGPS/gpsLocation"
        - name: "delay"
          type: "number"
          source: "LambdaCalcTimeCheckToDelay/delay"
        dataOuts:
        - name: "timeToGate"
          type: "collection"
        properties:
        - name: "resources"
          value: "java:arn:aws:lambda:us-east-1:581396451702:function:calcTimeToGate"
    - function:
        name: "informPassenger"
        type: "int"
        dataIns:
        - name: "timeToGate"
          type: "collection"
          source: "LambdaCalcTimeToGate/timeToGate"
        properties:
        - name: "resources"
          value: "java:arn:aws:lambda:us-east-1:581396451702:function:informPassenger"
